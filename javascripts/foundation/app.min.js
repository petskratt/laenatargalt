/*
 * jQuery Custom Forms Plugin 1.0
 * www.ZURB.com
 * Copyright 2010, ZURB
 * Free to use under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
*/(function(e){var t=function(){return{tmp:[],hidden:null,adjust:function(t){var n=this;n.hidden=t.parents().andSelf().filter(":hidden");n.hidden.each(function(){var t=e(this);n.tmp.push(t.attr("style"));t.css({visibility:"hidden",display:"block"})})},reset:function(){var t=this;t.hidden.each(function(n){var r=e(this),i=t.tmp[n];i===undefined?r.removeAttr("style"):r.attr("style",i)});t.tmp=[];t.hidden=null}}};jQuery.foundation=jQuery.foundation||{};jQuery.foundation.customForms=jQuery.foundation.customForms||{};e.foundation.customForms.appendCustomMarkup=function(n){function i(t,n){var r=e(n).hide(),i=r.attr("type"),s=r.next("span.custom."+i);s.length===0&&(s=e('<span class="custom '+i+'"></span>').insertAfter(r));s.toggleClass("checked",r.is(":checked"));s.toggleClass("disabled",r.is(":disabled"))}function s(n,r){var i=t(),s=e(r),o=s.next("div.custom.dropdown"),u=o.find("ul"),a=o.find(".current"),f=o.find(".selector"),l=s.find("option"),c=l.filter(":selected"),h=0,p="",d,v=!1;if(s.hasClass("no-custom"))return;if(o.length===0){var m=s.hasClass("small")?"small":s.hasClass("medium")?"medium":s.hasClass("large")?"large":s.hasClass("expand")?"expand":"";o=e('<div class="'+["custom","dropdown",m].join(" ")+'"><a href="#" class="selector"></a><ul /></div>"');f=o.find(".selector");u=o.find("ul");p=l.map(function(){return"<li>"+e(this).html()+"</li>"}).get().join("");u.append(p);v=o.prepend('<a href="#" class="current">'+c.html()+"</a>").find(".current");s.after(o).hide()}else{p=l.map(function(){return"<li>"+e(this).html()+"</li>"}).get().join("");u.html("").append(p)}o.toggleClass("disabled",s.is(":disabled"));d=u.find("li");l.each(function(t){if(this.selected){d.eq(t).addClass("selected");v&&v.html(e(this).html())}});u.css("width","inherit");o.css("width","inherit");if(!o.is(".small, .medium, .large, .expand")){o.addClass("open");i.adjust(u);h=d.outerWidth()>h?d.outerWidth():h;i.reset();o.removeClass("open");o.width(h+18);u.width(h+16)}}var r={disable_class:"js-disable-custom"};n=e.extend(r,n);e("form.custom input:radio[data-customforms!=disabled]").each(i);e("form.custom input:checkbox[data-customforms!=disabled]").each(i);e("form.custom select[data-customforms!=disabled]").each(s)};var n=function(t){var n=0,r=t.next();$options=t.find("option");r.find("ul").html("");$options.each(function(){$li=e("<li>"+e(this).html()+"</li>");r.find("ul").append($li)});$options.each(function(t){if(this.selected){r.find("li").eq(t).addClass("selected");r.find(".current").html(e(this).html())}});r.removeAttr("style").find("ul").removeAttr("style");r.find("li").each(function(){r.addClass("open");e(this).outerWidth()>n&&(n=e(this).outerWidth());r.removeClass("open")});r.css("width",n+18+"px");r.find("ul").css("width",n+16+"px")},r=function(e){var t=e.prev(),n=t[0];if(!1===t.is(":disabled")){n.checked=n.checked?!1:!0;e.toggleClass("checked");t.trigger("change")}},i=function(t){var n=t.prev(),r=n[0];if(!1===n.is(":disabled")){e('input:radio[name="'+n.attr("name")+'"]').next().not(t).removeClass("checked");t.hasClass("checked")||t.toggleClass("checked");r.checked=t.hasClass("checked");n.trigger("change")}};e(document).on("click","form.custom span.custom.checkbox",function(t){t.preventDefault();t.stopPropagation();r(e(this))});e(document).on("click","form.custom span.custom.radio",function(t){t.preventDefault();t.stopPropagation();i(e(this))});e(document).on("change","form.custom select[data-customforms!=disabled]",function(t){n(e(this))});e(document).on("click","form.custom label",function(t){var n=e("#"+e(this).attr("for")+"[data-customforms!=disabled]"),s,o;if(n.length!==0)if(n.attr("type")==="checkbox"){t.preventDefault();s=e(this).find("span.custom.checkbox");r(s)}else if(n.attr("type")==="radio"){t.preventDefault();o=e(this).find("span.custom.radio");i(o)}});e(document).on("click","form.custom div.custom.dropdown a.current, form.custom div.custom.dropdown a.selector",function(t){var n=e(this),r=n.closest("div.custom.dropdown"),i=r.prev();t.preventDefault();e("div.dropdown").removeClass("open");if(!1===i.is(":disabled")){r.toggleClass("open");r.hasClass("open")?e(document).bind("click.customdropdown",function(t){r.removeClass("open");e(document).unbind(".customdropdown")}):e(document).unbind(".customdropdown");return!1}});e(document).on("click","form.custom div.custom.dropdown li",function(t){var n=e(this),r=n.closest("div.custom.dropdown"),i=r.prev(),s=0;t.preventDefault();t.stopPropagation();e("div.dropdown").removeClass("open");n.closest("ul").find("li").removeClass("selected");n.addClass("selected");r.removeClass("open").find("a.current").html(n.html());n.closest("ul").find("li").each(function(e){n[0]==this&&(s=e)});i[0].selectedIndex=s;i.trigger("change")});e.fn.foundationCustomForms=e.foundation.customForms.appendCustomMarkup})(jQuery);(function(e,t,n){"use strict";var r={bodyHeight:0,selector:".has-tip",tooltipClass:".tooltip",tipTemplate:function(e,t){return'<span data-selector="'+e+'" class="'+r.tooltipClass.substring(1)+'">'+t+'<span class="nub"></span></span>'}},i={init:function(t){r=e.extend(r,t);r.selector=r.targetClass?r.targetClass:r.selector;return this.each(function(){var t=e("body");if(Modernizr.touch){t.on("click.tooltip touchstart.tooltip touchend.tooltip",r.selector,function(t){t.preventDefault();e(r.tooltipClass).hide();i.showOrCreateTip(e(this))});t.on("click.tooltip touchstart.tooltip touchend.tooltip",r.tooltipClass,function(t){t.preventDefault();e(this).fadeOut(150)})}else t.on("mouseenter.tooltip mouseleave.tooltip",r.selector,function(t){var n=e(this);t.type==="mouseenter"?i.showOrCreateTip(n):t.type==="mouseleave"&&i.hide(n)});e(this).data("tooltips",!0)})},showOrCreateTip:function(e){var t=i.getTip(e);t&&t.length>0?i.show(e):i.create(e)},getTip:function(t){var n=i.selector(t),s=null;n&&(s=e("span[data-selector="+n+"]"+r.tooltipClass));return s.length>0?s:!1},selector:function(e){var t=e.attr("id"),r=e.data("selector");if(t===n&&r===n){r="tooltip"+Math.random().toString(36).substring(7);e.attr("data-selector",r)}return t?t:r},create:function(t){var n=e(r.tipTemplate(i.selector(t),e("<div>").html(t.attr("title")).html())),s=i.inheritable_classes(t);n.addClass(s).appendTo("body");Modernizr.touch&&n.append('<span class="tap-to-close">tap to close </span>');t.removeAttr("title");i.show(t)},reposition:function(n,r,i){var s,o,u,a,f,l;r.css("visibility","hidden").show();s=n.data("width");o=r.children(".nub");u=o.outerHeight();a=o.outerWidth();l=function(e,t,n,r,i,s){return e.css({top:t,bottom:r,left:i,right:n,width:s?s:"auto"}).end()};l(r,n.offset().top+n.outerHeight()+10,"auto","auto",n.offset().left,s);l(o,-u,"auto","auto",10);if(e(t).width()<767){f=n.closest(".columns");f.length<0&&(f=e("body"));r.width(f.outerWidth()-25).css("left",15).addClass("tip-override");l(o,-u,"auto","auto",n.offset().left)}else if(i&&i.indexOf("tip-top")>-1){l(r,n.offset().top-r.outerHeight()-u,"auto","auto",n.offset().left,s).removeClass("tip-override");l(o,"auto","auto",-u,"auto")}else if(i&&i.indexOf("tip-left")>-1){l(r,n.offset().top+n.outerHeight()/2-u,"auto","auto",n.offset().left-r.outerWidth()-10,s).removeClass("tip-override");l(o,r.outerHeight()/2-u/2,-u,"auto","auto")}else if(i&&i.indexOf("tip-right")>-1){l(r,n.offset().top+n.outerHeight()/2-u,"auto","auto",n.offset().left+n.outerWidth()+10,s).removeClass("tip-override");l(o,r.outerHeight()/2-u/2,"auto","auto",-u)}r.css("visibility","visible").hide()},inheritable_classes:function(t){var n=["tip-top","tip-left","tip-bottom","tip-right","noradius"],r=t.attr("class"),i=r?e.map(r.split(" "),function(t,r){if(e.inArray(t,n)!==-1)return t}).join(" "):"";return e.trim(i)},show:function(e){var t=i.getTip(e);i.reposition(e,t,e.attr("class"));t.fadeIn(150)},hide:function(e){var t=i.getTip(e);t.fadeOut(150)},reload:function(){var t=e(this);return t.data("tooltips")?t.foundationTooltips("destroy").foundationTooltips("init"):t.foundationTooltips("init")},destroy:function(){return this.each(function(){e(t).off(".tooltip");e(r.selector).off(".tooltip");e(r.tooltipClass).each(function(t){e(e(r.selector).get(t)).attr("title",e(this).text())}).remove()})}};e.fn.foundationTooltips=function(t){if(i[t])return i[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t=="object"||!t)return i.init.apply(this,arguments);e.error("Method "+t+" does not exist on jQuery.foundationTooltips")}})(jQuery,this);(function(e,t,n){"use strict";function a(e,t,n,r){var i=e,s=t,o=n,u=r,a=0,f=1.0001,l=0,c=0,h=0;do{l=s+o*(Math.pow(f,u+1)-f)/(f-1)+a*Math.pow(f,u)-i;c=o*(u*Math.pow(f,u+1)-(u+1)*Math.pow(f,u)+1)/Math.pow(f-1,2)+u*a*Math.pow(f,u-1);h=l/c;f-=h}while(Math.abs(h)>1e-9);var p=Math.pow(1/f,12)-1;return p}var r={"#tab1":{rate:{min:12,max:22,avg:18},name:{est:"krediidkaart",rus:"кредитная карточка"},term:{min:30,max:360,avg:60,step:30},amount:{min:200,max:4e3,avg:500},fee:{min:10,max:10,rate:0},penalty:{fee:3,rate:{est:"8% aastas",rus:"8% в год"}}},"#tab2":{rate:{min:14,max:25,avg:19},name:{est:"järelmaks",rus:"кредит в рассрочку"},term:{min:120,max:1440,avg:240,step:30},amount:{min:120,max:1e4,avg:800},fee:{min:17,max:17,rate:0},penalty:{fee:16,rate:{est:"8% aastas",rus:"8% в год"}}},"#tab3":{rate:{min:2,max:6,avg:3.5},name:{est:"kodulaen",rus:"жилищный кредит"},term:{min:1440,max:14400,avg:3600,step:360},amount:{min:1900,max:2e5,avg:5e4},fee:{min:64,max:192,rate:.01},penalty:{fee:8,rate:{est:"8% aastas",rus:"8% в год"}}},"#tab4":{rate:{min:5.5,max:12,avg:6},name:{est:"autoliising",rus:"лизинг автомобилей"},term:{min:360,max:2160,avg:1440,step:30},amount:{min:3e3,max:1e5,avg:1e4},fee:{min:175,max:9999999,rate:.01},penalty:{fee:8,rate:{est:"8% aastas",rus:"8% в год"}}},"#tab5":{rate:{min:13,max:26,avg:19},name:{est:"väikelaen",rus:"потребительский кредит"},term:{min:30,max:1800,avg:60,step:30},amount:{min:320,max:1e4,avg:1e3},fee:{min:32,max:9999999,rate:.015},penalty:{fee:8,rate:{est:"8% aastas",rus:"8% в год"}}},"#tab6":{rate:{min:14,max:25,avg:19},name:{est:"arvelduslaen",rus:"расчетный кредит"},term:{min:30,max:360,avg:60,step:30},amount:{min:190,max:2e3,avg:500},fee:{min:6,max:9999999,rate:.01},penalty:{fee:3,rate:{est:"8% aastas",rus:"8% в год"}}},"#tab7":{rate:{min:112,max:245,avg:146},name:{est:"kiirlaen",rus:"быстрый кредит"},term:{min:30,max:360,avg:60,step:30},amount:{min:50,max:1500,avg:130},fee:{min:0,max:9999999,rate:.07},penalty:{fee:20,rate:{est:"0,75% päevas",rus:"0,75% в день"}}}},i=r["#tab1"].fee,s=r["#tab1"].penalty,o={est:{day:"päeva",month:"kuud",year:"aastat"},rus:{day:"д.",month:"мес.",year:"лет"}},u=Math.round;Math.round=function(e,t){if(arguments.length==1)return u(e);var n=Math.pow(10,t);return u(e*n)/n};e.fn.loanCalc=function(t,n,r){var u=t*i.rate;u<i.min&&(u=i.min);u>i.max&&(u=i.max);e(".fee").html(Math.round(u));e(".penalty").html(s.rate[lang]);e(".penalty-fee").html(s.fee);e(".sum").html(t);n<60?e(".time").html(Math.round(n,1)+" "+o[lang].day):n<720?e(".time").html(Math.round(n/30,1)+" "+o[lang].month):e(".time").html(Math.round(n/30/12,1)+" "+o[lang].year);e(".payments").html(Math.round(n/30,1));e(".interest").html(r);var f=r/100,l=f/12,c=Math.round(n/30),h=t*l*Math.pow(1+l,c)/(Math.pow(1+l,c)-1),p=h*(n/30),d=p-t;e(".annuity").html(Math.round(h));e(".totalsum").html(Math.round(p));e(".totalinterest").html(Math.round(d));e(".amountminusfee").html(Math.round(t-u));e(".reversediscount").html(Math.round(p/(t-u)*100)-100);var v=a(t,u,h,c);e(".apr").html(Math.round(v*100,2))};e(document).ready(function(){e(".amount-slider").slider({range:"min",min:r["#tab1"].amount.min,max:r["#tab1"].amount.max,step:50,value:r["#tab1"].amount.avg,slide:function(t,n){e.fn.loanCalc(n.value,parseInt(e(".period-slider").slider("value")),parseFloat(e(".interest-slider").slider("value")))}});e(".period-slider").slider({range:"min",min:r["#tab1"].term.min,max:r["#tab1"].term.max,step:r["#tab1"].term.step,value:r["#tab1"].term.avg,slide:function(t,n){e.fn.loanCalc(parseInt(e(".amount-slider").slider("value")),n.value,parseFloat(e(".interest-slider").slider("value")))}});e(".interest-slider").slider({range:"min",min:r["#tab1"].rate.min,max:r["#tab1"].rate.max,step:.5,value:r["#tab1"].rate.avg,slide:function(t,n){e.fn.loanCalc(parseInt(e(".amount-slider").slider("value")),parseInt(e(".period-slider").slider("value")),n.value)}});e.fn.loanCalc(parseInt(e(".amount-slider").slider("value")),parseInt(e(".period-slider").slider("value")),parseFloat(e(".interest-slider").slider("value")))});e.fn.foundationTabs=function(n){var o=e.extend({callback:e.noop},n),u=function(t){var n=t.closest("dl, ul").find(".active"),o=t.children("a").attr("href"),u=/^#/.test(o),a="";e(".interest-slider").slider("option","min",r[o].rate.min);e(".interest-slider").slider("option","max",r[o].rate.max);e(".interest-slider").slider("option","value",r[o].rate.avg);e(".period-slider").slider("option","min",r[o].term.min);e(".period-slider").slider("option","max",r[o].term.max);e(".period-slider").slider("option","value",r[o].term.avg);e(".period-slider").slider("option","step",r[o].term.step);e(".amount-slider").slider("option","min",r[o].amount.min);e(".amount-slider").slider("option","max",r[o].amount.max);e(".amount-slider").slider("option","value",r[o].amount.avg);e(".loantype").html(r[o].name[lang]);i=r[o].fee;s=r[o].penalty;e.fn.loanCalc(parseInt(e(".amount-slider").slider("value")),parseInt(e(".period-slider").slider("value")),parseFloat(e(".interest-slider").slider("value")));if(u){a=o+"Tab";a=a.replace(/^.+#/,"#");e(a).closest(".tabs-content").children("li").removeClass("active").hide();e(a).css("display","block").addClass("active")}n.removeClass("active");t.addClass("active")};e(document).on("click.fndtn",".tabs a",function(t){u(e(this).parent("dd, li"))});if(t.location.hash){u(e('a[href="'+t.location.hash+'"]').parent("dd, li"));o.callback()}};var f=e(document),l=t.Modernizr;e(document).ready(function(){e.fn.foundationTabs?f.foundationTabs({callback:e.foundation.customForms.appendCustomMarkup}):null;e.fn.foundationTooltips?f.foundationTooltips():null;e.fn.foundationClearing?f.foundationClearing():null});l.touch&&!t.location.hash&&e(t).load(function(){setTimeout(function(){t.scrollTo(0,1)},0)});e("iframe").each(function(){var t=e(this).attr("src");e(this).attr("src").indexOf("?")>0?e(this).attr({src:t+"&wmode=transparent",wmode:"Opaque"}):e(this).attr({src:t+"?wmode=transparent",wmode:"Opaque"})})})(jQuery,this);