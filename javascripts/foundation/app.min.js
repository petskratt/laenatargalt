(function(e,t,n){"use strict";function u(e,t,n,r){var i=e,s=t,o=n,u=r,a=0,f=1.0001,l=0,c=0,h=0;do{l=s+o*(Math.pow(f,u+1)-f)/(f-1)+a*Math.pow(f,u)-i;c=o*(u*Math.pow(f,u+1)-(u+1)*Math.pow(f,u)+1)/Math.pow(f-1,2)+u*a*Math.pow(f,u-1);h=l/c;f-=h}while(Math.abs(h)>1e-9);var p=Math.pow(1/f,12)-1;return p}var r={min:10,max:10,rate:0},i={est:{day:"päeva",month:"kuud",year:"aastat"},rus:{day:"д.",month:"мес.",year:"лет"}},s={fee:3,rate:{est:"8% aastas",rus:"8% в год"}},o=Math.round;Math.round=function(e,t){if(arguments.length==1)return o(e);var n=Math.pow(10,t);return o(e*n)/n};e.fn.loanCalc=function(t,n,o){var a=t*r.rate;a<r.min&&(a=r.min);a>r.max&&(a=r.max);e(".fee").html(Math.round(a));e(".penalty").html(s.rate[lang]);e(".penalty-fee").html(s.fee);e(".sum").html(t);n<60?e(".time").html(Math.round(n,1)+" "+i[lang].day):n<720?e(".time").html(Math.round(n/30,1)+" "+i[lang].month):e(".time").html(Math.round(n/30/12,1)+" "+i[lang].year);e(".payments").html(Math.round(n/30,1));e(".interest").html(o);var f=o/100,l=f/12,c=Math.round(n/30),h=t*l*Math.pow(1+l,c)/(Math.pow(1+l,c)-1),p=h*(n/30),d=p-t;e(".annuity").html(Math.round(h));e(".totalsum").html(Math.round(p));e(".totalinterest").html(Math.round(d));e(".amountminusfee").html(Math.round(t-a));e(".reversediscount").html(Math.round(p/(t-a)*100)-100);var v=u(t,a,h,c);e(".apr").html(Math.round(v*100,2))};e(document).ready(function(){e(".amount-slider").slider({range:"min",min:200,max:4e3,step:50,value:500,slide:function(t,n){e.fn.loanCalc(n.value,parseInt(e(".period-slider").slider("value")),parseInt(e(".interest-slider").slider("value")))}});e(".period-slider").slider({range:"min",min:30,max:360,step:30,value:60,slide:function(t,n){e.fn.loanCalc(parseInt(e(".amount-slider").slider("value")),n.value,parseInt(e(".interest-slider").slider("value")))}});e(".interest-slider").slider({range:"min",min:13,max:26,step:.5,value:19,slide:function(t,n){e.fn.loanCalc(parseInt(e(".amount-slider").slider("value")),parseInt(e(".period-slider").slider("value")),n.value)}});e.fn.loanCalc(parseInt(e(".amount-slider").slider("value")),parseInt(e(".period-slider").slider("value")),parseInt(e(".interest-slider").slider("value")))});e.fn.foundationTabs=function(n){var i=e.extend({callback:e.noop},n),o=function(t){var n={"#tab1":{rate:{min:13,max:26,avg:19},name:{est:"krediidkaart",rus:"кредитная карточка"},term:{min:30,max:360,avg:60,step:30},amount:{min:200,max:4e3,avg:500},fee:{min:10,max:10,rate:0},penalty:{fee:3,rate:{est:"8% aastas",rus:"8% в год"}}},"#tab2":{rate:{min:14,max:25,avg:19},name:{est:"järelmaks",rus:"кредит в рассрочку"},term:{min:120,max:1440,avg:240,step:30},amount:{min:120,max:1e4,avg:800},fee:{min:17,max:17,rate:0},penalty:{fee:16,rate:{est:"8% aastas",rus:"8% в год"}}},"#tab3":{rate:{min:2,max:6,avg:3},name:{est:"kodulaen",rus:"жилищный кредит"},term:{min:1440,max:14400,avg:3600,step:360},amount:{min:1900,max:2e5,avg:5e4},fee:{min:64,max:192,rate:.01},penalty:{fee:8,rate:{est:"8% aastas",rus:"8% в год"}}},"#tab4":{rate:{min:5.5,max:12,avg:6},name:{est:"autoliising",rus:"лизинг автомобилей"},term:{min:360,max:2160,avg:1440,step:30},amount:{min:3e3,max:1e5,avg:1e4},fee:{min:175,max:9999999,rate:.01},penalty:{fee:8,rate:{est:"8% aastas",rus:"8% в год"}}},"#tab5":{rate:{min:13,max:26,avg:19},name:{est:"väikelaen",rus:"потребительский кредит"},term:{min:30,max:360,avg:60,step:30},amount:{min:320,max:1e4,avg:1e3},fee:{min:32,max:9999999,rate:.015},penalty:{fee:8,rate:{est:"8% aastas",rus:"8% в год"}}},"#tab6":{rate:{min:14,max:25,avg:19},name:{est:"arvelduslaen",rus:"расчетный кредит"},term:{min:30,max:360,avg:60,step:30},amount:{min:190,max:2e3,avg:500},fee:{min:6,max:9999999,rate:.01},penalty:{fee:3,rate:{est:"8% aastas",rus:"8% в год"}}},"#tab7":{rate:{min:112,max:245,avg:146},name:{est:"kiirlaen",rus:"быстрый кредит"},term:{min:30,max:360,avg:60,step:30},amount:{min:50,max:2e3,avg:130},fee:{min:0,max:9999999,rate:.35},penalty:{fee:20,rate:{est:"0,75% päevas",rus:"0,75% в день"}}}},i=t.closest("dl, ul").find(".active"),o=t.children("a").attr("href"),u=/^#/.test(o),a="";e(".interest-slider").slider("option","min",n[o].rate.min);e(".interest-slider").slider("option","max",n[o].rate.max);e(".interest-slider").slider("option","value",n[o].rate.avg);e(".period-slider").slider("option","min",n[o].term.min);e(".period-slider").slider("option","max",n[o].term.max);e(".period-slider").slider("option","value",n[o].term.avg);e(".period-slider").slider("option","step",n[o].term.step);e(".amount-slider").slider("option","min",n[o].amount.min);e(".amount-slider").slider("option","max",n[o].amount.max);e(".amount-slider").slider("option","value",n[o].amount.avg);e(".loantype").html(n[o].name[lang]);r=n[o].fee;s=n[o].penalty;e.fn.loanCalc(parseInt(e(".amount-slider").slider("value")),parseInt(e(".period-slider").slider("value")),parseInt(e(".interest-slider").slider("value")));if(u){a=o+"Tab";a=a.replace(/^.+#/,"#");e(a).closest(".tabs-content").children("li").removeClass("active").hide();e(a).css("display","block").addClass("active")}i.removeClass("active");t.addClass("active")};e(document).on("click.fndtn",".tabs a",function(t){o(e(this).parent("dd, li"))});if(t.location.hash){o(e('a[href="'+t.location.hash+'"]').parent("dd, li"));i.callback()}};var a=e(document),f=t.Modernizr;e(document).ready(function(){e.fn.foundationButtons?a.foundationButtons():null;e.fn.foundationTabs?a.foundationTabs({callback:e.foundation.customForms.appendCustomMarkup}):null;e.fn.foundationTooltips?a.foundationTooltips():null;e.fn.foundationClearing?a.foundationClearing():null;e("input, textarea").placeholder()});f.touch&&!t.location.hash&&e(t).load(function(){setTimeout(function(){t.scrollTo(0,1)},0)});e("iframe").each(function(){var t=e(this).attr("src");e(this).attr("src").indexOf("?")>0?e(this).attr({src:t+"&wmode=transparent",wmode:"Opaque"}):e(this).attr({src:t+"?wmode=transparent",wmode:"Opaque"})})})(jQuery,this);